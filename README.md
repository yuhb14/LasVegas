# LasVegas
拉斯维加斯算法结合分枝限界算法解决电路板布线问题

算法说明：
   拉斯维加斯算法的一个显著特征是它所作的随机性决策有可能导致算法找不到所需的解。由于这个算法比较难懂，没有思路编写。于是就先学习-- Las Vegas算法解决N皇后问题，Las Vegas解决N皇后问题是采用随机放置位置策略和结合分枝限界相结合。综合解决方案电路板布线问题采用了机放置位置策略和结合分枝限界相结合的方式来解决。关键代码如下：

* 标号处：这里是当前点相邻四个点是否可以放置，如果可以放置用selectPostion保存下来，并用num记录有多少个位置可以放置。 
* 标号处：这里利用上面保存的可以放置的点，然后随机取其中一个加入队列。这就是Las Vegas的精髓！ 
* 标号处：是初始化时间种子，是随机选择的关键，这个虽然简单，但是由于随机函数不了解，造成了很大伪随机。
        srand( (unsigned)time( NULL ) );//初始化时间种子 ---------- 
	  int num=0;//方格未标记个数
	   Position  selectPostion[5]; //选择可以到达位置保存
        for(int i=0; i<NumNeighBlo; i++)
        {
            //达到四个方向
            nbr.row=here.row+offset[i].row;
            nbr.col=here.col+offset[i].col;
            if(grid[nbr.row][nbr.col]==-1)
            {
                //该方格未标记 
                grid[nbr.row][nbr.col]=grid[here.row][here.col]+1;
                if((nbr.row==finish.row)&&(nbr.col==finish.col))
                    break;
                selectPostion[num].row=nbr.row;   ---------- 
                selectPostion[num].col=nbr.col;
                num++;   
            }
        }   
         if(num >0) //如果标记，则在这么多个未标记个数中随机选择一个位置 
             //将这个邻居入队
             q_FindPath.push(selectPostion[rand()%(num)]);  ---------- 
二、结果分析
 红色字表示   输入
 蓝色字表示   输出结果
 运行时间表示 算法复杂度

 1）样例一：3*3 棋盘

---------分支限界法之布线问题--------
在一个m*n的棋盘上，请分别输入m和n,代表行数和列数，然后输入回车
3 3 （回车）
初始化棋盘格和加围墙
--------------- ----------------
-2 -2 -2 -2 -2
-2 -1 -1 -1 -2
-2 -1 -1 -1 -2
-2 -1 -1 -1 -2
-2 -2 -2 -2 -2
-------------------------------
请输入已经占据的位置  行坐标  列坐标,代表此位置不能布线
例如输入  2 2  表示坐标 2 2 不能布线;当输入的坐标为 0 0 表示结束输入
2 1（回车）
2 3（回车）
3 3（回车）
0 0（回车）
布线前的棋盘格
-------------------------------
-2 -2 -2 -2 -2
-2 -1 -1 -1 -2
-2 -3 -1 -3 -2
-2 -1 -1 -3 -2
-2 -2 -2 -2 -2
-------------------------------
请输入起点位置坐标
1 1（回车）
请输入终点位置坐标
3 1（回车）

没有找到路线,第1次尝试

没有找到路线,第2次尝试

没有找到路线,第3次尝试
-------------------------------
$ 代表围墙
# 代表已经占据的点
* 代表布线路线
= 代表还没有布线的点
-------------------------------
$ $ $ $ $
$ * * = $
$ # * # $
$ * * # $
$ $ $ $ $
-------------------------------
路径坐标和长度

(1,1) (1,2) (2,2) (3,2) (3,1)

路径长度：5

布线完毕,查找4次
运行时间: 12 ms

样例二：5*5 棋盘

---------分支限界法之布线问题--------
在一个m*n的棋盘上，请分别输入m和n,代表行数和列数
5 5（回车）
初始化棋盘格和加围墙
--------------- ----------------
-2 -2 -2 -2 -2 -2 -2
-2 -1 -1 -1 -1 -1 -2
-2 -1 -1 -1 -1 -1 -2
-2 -1 -1 -1 -1 -1 -2
-2 -1 -1 -1 -1 -1 -2
-2 -1 -1 -1 -1 -1 -2
-2 -2 -2 -2 -2 -2 -2
-------------------------------
请输入已经占据的位置  行坐标  列坐标,代表此位置不能布线
例如输入  2 2  表示坐标 2 2 不能布线;当输入的坐标为 0 0 表示结束输入
3 1（回车）
3 2（回车）
3 4（回车）
3 5（回车）
4 5（回车）
0 0（回车）
布线前的棋盘格
-------------------------------
-2 -2 -2 -2 -2 -2 -2
-2 -1 -1 -1 -1 -1 -2
-2 -1 -1 -1 -1 -1 -2
-2 -3 -3 -1 -3 -3 -2
-2 -1 -1 -1 -1 -3 -2
-2 -1 -1 -1 -1 -1 -2
-2 -2 -2 -2 -2 -2 -2
-------------------------------
请输入起点位置坐标
1 1（回车）
请输入终点位置坐标
5 2（回车）

没有找到路线,第1次尝试

没有找到路线,第2次尝试

没有找到路线,第3次尝试

没有找到路线,第4次尝试

没有找到路线,第5次尝试

没有找到路线,第6次尝试
-------------------------------
$ 代表围墙
# 代表已经占据的点
* 代表布线路线
= 代表还没有布线的点
-------------------------------
$ $ $ $ $ $ $
$ * = = = = $
$ * * * = = $
$ # # * # # $
$ = = * = # $
$ = * * = = $
$ $ $ $ $ $ $
-------------------------------
路径坐标和长度

(1,1) (2,1) (2,2) (2,3) (3,3) (4,3) (5,3) (5,2)

路径长度：8

布线完毕,查找7次
运行时间: 16 ms


样例三：10*10棋盘

---------分支限界法之布线问题--------
在一个m*n的棋盘上，请分别输入m和n,代表行数和列数
10  10（回车）
初始化棋盘格和加围墙
--------------- ----------------
-2 -2 -2 -2 -2 -2 -2 -2 -2 -2 -2 -2
-2 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -2
-2 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -2
-2 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -2
-2 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -2
-2 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -2
-2 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -2
-2 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -2
-2 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -2
-2 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -2
-2 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -2
-2 -2 -2 -2 -2 -2 -2 -2 -2 -2 -2 -2
-------------------------------
请输入已经占据的位置  行坐标  列坐标,代表此位置不能布线
例如输入  2 2  表示坐标 2 2 不能布线;当输入的坐标为 0 0 表示结束输入
5 1（回车）
5 2（回车）
5 3（回车）
5 4（回车）
5 5（回车）
5 7（回车）
5 8（回车）
5 9（回车）
0 0（回车）
布线前的棋盘格
-------------------------------
-2 -2 -2 -2 -2 -2 -2 -2 -2 -2 -2 -2
-2 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -2
-2 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -2
-2 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -2
-2 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -2
-2 -3 -3 -3 -3 -3 -1 -3 -3 -3 -1 -2
-2 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -2
-2 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -2
-2 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -2
-2 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -2
-2 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -2
-2 -2 -2 -2 -2 -2 -2 -2 -2 -2 -2 -2
-------------------------------
请输入起点位置坐标
1 1（回车）
请输入终点位置坐标
9 9（回车）

没有找到路线,第1次尝试

没有找到路线,第2次尝试

没有找到路线,第3次尝试

没有找到路线,第4次尝试

没有找到路线,第5次尝试

没有找到路线,第6次尝试

没有找到路线,第7次尝试
-------------------------------
$ 代表围墙
# 代表已经占据的点
* 代表布线路线
= 代表还没有布线的点
-------------------------------
$ $ $ $ $ $ $ $ $ $ $ $
$ * = = = = = * * = = $
$ * * * * * * * * * * $
$ = = = = = = = = = * $
$ = = = = = * * * * * $
$ # # # # # * # # # = $
$ = = = = = * = = = = $
$ = = = = = * = = = = $
$ = = = = = * = = = = $
$ = = = = = * * * * = $
$ = = = = = = = = = = $
$ $ $ $ $ $ $ $ $ $ $ $
-------------------------------
路径坐标和长度

(1,1) (2,1) (2,2) (2,3) (2,4) (2,5) (2,6) (2,7) (1,7) (1,8) (2,8) (2,9) (2,10) (3,10) (4,10) (4,9) (4,8) (4,7) (4,6) (5,6) (6,6) (7,6) (8,6) (9,6) (9,7) (9,8) (9,9)

路径长度：27

布线完毕,查找8次
运行时间: 31 ms
